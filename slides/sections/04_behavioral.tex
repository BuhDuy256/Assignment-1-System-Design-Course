\section{Behavioral Patterns}

% ============================================
% OBSERVER PATTERN
% ============================================

\begin{frame}{Observer: Vấn đề}
  \begin{itemize}
    \item Nhiều objects cần biết khi state thay đổi
    \item Tight coupling giữa subject và observers
    \item Polling liên tục lãng phí tài nguyên
    \item Khó thêm/bớt observers
    \item Notification không nhất quán
  \end{itemize}
\end{frame}

\begin{frame}{Observer: Câu hỏi cốt lõi}
  \begin{center}
    \Large
    \textbf{Làm sao thông báo cho nhiều objects\\
    khi state thay đổi?}
  \end{center}
  \vspace{1em}
  \begin{itemize}
    \item Publish-subscribe mechanism
    \item One-to-many dependency
    \item Automatic notifications
  \end{itemize}
\end{frame}

\begin{frame}{Observer: Cách hoạt động}
  \begin{itemize}
    \item Subject duy trì danh sách observers
    \item Observers đăng ký/hủy đăng ký với subject
    \item Subject notify observers khi state thay đổi
    \item Observers update dựa trên notification
    \item Push vs Pull model
  \end{itemize}
\end{frame}

\begin{frame}{Observer: Khi nào dùng?}
  \begin{block}{Nên dùng khi}
    \begin{itemize}
      \item State change cần propagate đến nhiều objects
      \item Event handling systems
      \item Số lượng observers thay đổi tại runtime
    \end{itemize}
  \end{block}
  
  \begin{alertblock}{Không nên dùng khi}
    \begin{itemize}
      \item Chỉ có một observer cố định
      \item Notification order quan trọng
    \end{itemize}
  \end{alertblock}
\end{frame}

\begin{frame}{Observer: Trade-offs}
  \begin{columns}[T]
    \begin{column}{0.48\textwidth}
      \textbf{Ưu điểm}
      \begin{itemize}
        \item Loose coupling
        \item Dynamic relationships
        \item Broadcast communication
        \item Open/Closed Principle
      \end{itemize}
    \end{column}
    
    \begin{column}{0.48\textwidth}
      \textbf{Nhược điểm}
      \begin{itemize}
        \item Random notification order
        \item Memory leaks nếu quên unsubscribe
        \item Performance với nhiều observers
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}

% ============================================
% STRATEGY PATTERN
% ============================================

\begin{frame}{Strategy: Vấn đề}
  \begin{itemize}
    \item Nhiều cách thực hiện cùng một task
    \item If-else/switch phức tạp để chọn algorithm
    \item Khó thêm algorithm mới
    \item Không thể thay đổi behavior tại runtime
    \item Vi phạm Open/Closed Principle
  \end{itemize}
\end{frame}

\begin{frame}{Strategy: Câu hỏi cốt lõi}
  \begin{center}
    \Large
    \textbf{Làm sao chọn algorithm\\
    linh hoạt tại runtime?}
  \end{center}
  \vspace{1em}
  \begin{itemize}
    \item Encapsulate algorithms thành objects
    \item Interchangeable algorithms
    \item Delegate execution
  \end{itemize}
\end{frame}

\begin{frame}{Strategy: Cách hoạt động}
  \begin{itemize}
    \item Define family of algorithms
    \item Encapsulate mỗi algorithm trong class riêng
    \item Algorithms implement chung interface
    \item Context chứa reference đến strategy
    \item Có thể thay strategy tại runtime
  \end{itemize}
\end{frame}

\begin{frame}{Strategy: Khi nào dùng?}
  \begin{block}{Nên dùng khi}
    \begin{itemize}
      \item Nhiều variants của algorithm
      \item Cần switch behavior tại runtime
      \item Tránh if-else phức tạp
    \end{itemize}
  \end{block}
  
  \begin{alertblock}{Không nên dùng khi}
    \begin{itemize}
      \item Chỉ có một algorithm duy nhất
      \item Algorithm hiếm khi thay đổi
    \end{itemize}
  \end{alertblock}
\end{frame}

\begin{frame}{Strategy: Trade-offs}
  \begin{columns}[T]
    \begin{column}{0.48\textwidth}
      \textbf{Ưu điểm}
      \begin{itemize}
        \item Runtime flexibility
        \item Clean code
        \item Easy to test
        \item Open/Closed Principle
      \end{itemize}
    \end{column}
    
    \begin{column}{0.48\textwidth}
      \textbf{Nhược điểm}
      \begin{itemize}
        \item Tăng số class
        \item Client phải biết differences
        \item Overhead cho simple cases
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}
