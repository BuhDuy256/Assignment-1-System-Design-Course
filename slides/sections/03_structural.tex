\section{Structural Patterns}

% ============================================
% DECORATOR PATTERN
% ============================================

\begin{frame}{Decorator: Vấn đề}
  \begin{itemize}
    \item Cần thêm chức năng cho object tại runtime
    \item Kế thừa làm tăng số class theo cấp số nhân
    \item Không thể modify class đã có
    \item Cần kết hợp nhiều behaviors linh hoạt
    \item Vi phạm Single Responsibility nếu thêm vào class gốc
  \end{itemize}
\end{frame}

\begin{frame}{Decorator: Câu hỏi cốt lõi}
  \begin{center}
    \Large
    \textbf{Làm sao thêm chức năng mới\\
    mà không sửa code hiện tại?}
  \end{center}
  \vspace{1em}
  \begin{itemize}
    \item Wrap object trong decorator object
    \item Giữ nguyên interface
    \item Stack nhiều decorators
  \end{itemize}
\end{frame}

\begin{frame}{Decorator: Cách hoạt động}
  \begin{itemize}
    \item Decorator implements cùng interface với component
    \item Chứa reference đến component được wrap
    \item Forward requests và thêm behavior
    \item Có thể nest nhiều decorators
    \item Client sử dụng qua interface chung
  \end{itemize}
\end{frame}

\begin{frame}{Decorator: Khi nào dùng?}
  \begin{block}{Nên dùng khi}
    \begin{itemize}
      \item Thêm chức năng tại runtime
      \item Tránh explosion của subclasses
      \item Cần kết hợp behaviors linh hoạt
    \end{itemize}
  \end{block}
  
  \begin{alertblock}{Không nên dùng khi}
    \begin{itemize}
      \item Behavior cố định tại compile time
      \item Cần modify core functionality
    \end{itemize}
  \end{alertblock}
\end{frame}

\begin{frame}{Decorator: Trade-offs}
  \begin{columns}[T]
    \begin{column}{0.48\textwidth}
      \textbf{Ưu điểm}
      \begin{itemize}
        \item Mở rộng linh hoạt
        \item Single Responsibility
        \item Combine behaviors
        \item Open/Closed Principle
      \end{itemize}
    \end{column}
    
    \begin{column}{0.48\textwidth}
      \textbf{Nhược điểm}
      \begin{itemize}
        \item Nhiều small objects
        \item Khó remove decorator
        \item Order-dependent
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}

% ============================================
% ADAPTER PATTERN
% ============================================

\begin{frame}{Adapter: Vấn đề}
  \begin{itemize}
    \item Hai interface không tương thích
    \item Không thể sửa code của third-party library
    \item Legacy code không khớp với hệ thống mới
    \item Muốn tái sử dụng class với interface khác
    \item Integration giữa các hệ thống khác nhau
  \end{itemize}
\end{frame}

\begin{frame}{Adapter: Câu hỏi cốt lõi}
  \begin{center}
    \Large
    \textbf{Làm sao tích hợp code\\
    với interface không tương thích?}
  \end{center}
  \vspace{1em}
  \begin{itemize}
    \item Tạo wrapper chuyển đổi interface
    \item Bridge giữa client và adaptee
    \item Không sửa code gốc
  \end{itemize}
\end{frame}

\begin{frame}{Adapter: Cách hoạt động}
  \begin{itemize}
    \item Adapter implements interface client mong đợi
    \item Chứa reference đến adaptee
    \item Translate calls từ client sang adaptee
    \item Có thể dùng inheritance hoặc composition
    \item Object adapter vs Class adapter
  \end{itemize}
\end{frame}

\begin{frame}{Adapter: Khi nào dùng?}
  \begin{block}{Nên dùng khi}
    \begin{itemize}
      \item Integrate third-party libraries
      \item Tái sử dụng legacy code
      \item Muốn interface thống nhất
    \end{itemize}
  \end{block}
  
  \begin{alertblock}{Không nên dùng khi}
    \begin{itemize}
      \item Có thể sửa code gốc
      \item Interfaces đã tương thích
    \end{itemize}
  \end{alertblock}
\end{frame}

\begin{frame}{Adapter: Trade-offs}
  \begin{columns}[T]
    \begin{column}{0.48\textwidth}
      \textbf{Ưu điểm}
      \begin{itemize}
        \item Tách interface khỏi implementation
        \item Reuse existing code
        \item Single Responsibility
        \item Flexibility
      \end{itemize}
    \end{column}
    
    \begin{column}{0.48\textwidth}
      \textbf{Nhược điểm}
      \begin{itemize}
        \item Tăng complexity
        \item Thêm indirection
        \item Performance overhead nhỏ
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}
